<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.thisteam.muhansangsa.mapper.OutMapper">

	<!--출고 예정 목록 조회 페이지 조회용(JSON)  -->
	<!--전체 조회-->
	<select id="selectOutList" resultType="com.thisteam.muhansangsa.vo.Out_scheduleListVO">
		SELECT
			a.out_schedule_cd,
			a.business_no,
			d.cust_name,
			a.emp_num,
			b.out_date,
			a.remarks,
			b.out_complete,
			b.product_cd,
			c.product_name,
			b.out_schedule_qty,
			b.out_qty,
			b.remarks,
			b.stock_cd
		FROM
			out_schedule a, 
			out_schedule_per_product b,
			product c,
			client d
		WHERE
			a.out_schedule_cd = b.out_schedule_cd
			AND b.product_cd = c.product_cd
			AND a.business_no = d.business_no
			<if test="status gte 0">
				AND b.out_complete = #{status}
			</if>
			<if test="!keyword.equals('')">
			<choose>
				<when test="searchType.equals('out_schedule_cd')">
					AND a.out_schedule_cd LIKE '%${keyword}%'
				</when>
				<when test="searchType.equals('product_name')">
					AND c.product_name LIKE '%${keyword}%'
				</when>
			</choose>
			</if>
		ORDER BY 
			a.out_schedule_cd DESC
	</select>
</mapper>
