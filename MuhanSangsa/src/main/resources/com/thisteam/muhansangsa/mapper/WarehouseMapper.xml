<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.thisteam.muhansangsa.mapper.WarehouseMapper">
	
	<!-- 창고 등록 -->
	<insert id="insertWarehouse">
		INSERT
			INTO warehouse
			VALUES (
				#{wh_cd},
				#{wh_name},
				#{wh_gubun},
				#{wh_location},
				CONCAT(#{wh_addr1}, ', ', #{wh_addr2}),
				#{wh_tel},
				#{wh_man_name},
				#{wh_use},
				#{remarks}
			)
	</insert>
	
	<!-- 창고 목록 조회 -->
	<select id="selectWarehouseList" resultType="com.thisteam.muhansangsa.vo.WarehouseVO">
		SELECT *
			FROM warehouse
	</select>
	
	<!-- 창고 권한 -->
	<select id="selectWhPrivilege" resultType="string">
		SELECT dept_cd
			FROM employees
			WHERE EMP_EMAIL = #{sId}
	</select>
	
	<!-- 창고 상세정보 -->
	<select id="selectWarehouseDetail" resultType="com.thisteam.muhansangsa.vo.WarehouseVO">
		SELECT *
			FROM warehouse
			WHERE wh_cd = #{wh_cd}
	</select>
	
	<!-- 창고 수정 -->
	<update id="updateWarehouse">
		UPDATE warehouse
			SET
				wh_name = #{wh_name},
				wh_gubun = #{wh_gubun},
				wh_location = #{wh_location},
				wh_addr = CONCAT(#{wh_addr1}, ', ', #{wh_addr2}),
				wh_tel = #{wh_tel},
				wh_man_name = #{wh_man_name},
				wh_use = #{wh_use},
				remarks = #{remarks}
			WHERE
				wh_cd = #{wh_cd}
	</update>
	
	<!-- 물류팀 직원 확인 -->
	<select id="selectWarehouseMan" resultType="string">
		SELECT wh_man_name
			FROM warehouse
			WHERE wh_man_name = ${wh_man_name}
	</select>
	
</mapper>
